<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Settings - Resume Doctor.Ai</title>
    <link rel="stylesheet" href="./static/css/us10_styles.css">
</head>
<body>
    <div class="dashboard-container">
        <div class="dashboard-header">
            <a href="/" class="nav-brand" onclick="handleBrandClick(event)">
                <div class="logo-dot"></div>
                <span class="brand-text">ResumeDoctor AI</span>
            </a>

            <nav class="dashboard-nav">
                <a href="us10_dashboard.html" class="nav-item">Dashboard</a>
                <a href="us10_scan_history.html" class="nav-item">Scan History</a>
                <a href="us10_account.html" class="nav-item active">Account</a>
                <span class="user-greeting" id="welcomeMessage">Hi, there!</span>
                <button class="logout-btn" onclick="logout()" title="Logout">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7Z" fill="currentColor"/>
                        <path d="M19 19H5V5H19V3H5C3.89 3 3 3.89 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V17H19V19Z" fill="currentColor"/>
                    </svg>
                </button>
            </nav>
        </div>
        
        <div class="dashboard-content">
            <div class="page-header">
                <h1 class="page-title">‚öôÔ∏è Account Settings</h1>
                <p class="page-subtitle">Manage your personal information, security settings, and account preferences</p>
            </div>

            <!-- Alert Container -->
            <div id="alertContainer"></div>
            
            <!-- Account Information Section -->
            <div class="settings-section">
                <h3 class="section-title">üë§ Personal Information</h3>
                <div class="settings-card">
                    <form id="personalInfoForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName">First Name</label>
                                <input type="text" id="firstName" name="first_name" required>
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name</label>
                                <input type="text" id="lastName" name="last_name" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="currentPasswordInfo">Current Password (required for email changes)</label>
                            <input type="password" id="currentPasswordInfo" name="current_password" placeholder="Enter current password to save changes">
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="resetPersonalInfo()">Reset</button>
                            <button type="submit" class="btn-primary">üíæ Save Changes</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Password Change Section -->
            <div class="settings-section">
                <h3 class="section-title">üîê Change Password</h3>
                <div class="settings-card">
                    <form id="passwordForm">
                        <div class="form-group">
                            <label for="currentPassword">Current Password</label>
                            <input type="password" id="currentPassword" name="current_password" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="newPassword">New Password</label>
                            <input type="password" id="newPassword" name="new_password" required>
                            <small class="form-help">Password must be at least 8 characters long</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmPassword">Confirm New Password</label>
                            <input type="password" id="confirmPassword" name="confirm_password" required>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="resetPasswordForm()">Reset</button>
                            <button type="submit" class="btn-primary">üîê Change Password</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Account Status Section -->
            <div class="settings-section">
                <h3 class="section-title">üìä Account Status</h3>
                <div class="settings-card">
                    <div class="status-grid">
                        <div class="status-item">
                            <div class="status-label">Account Type</div>
                            <div class="status-value" id="accountType">Basic</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">Member Since</div>
                            <div class="status-value" id="memberSince">-</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">Last Login</div>
                            <div class="status-value" id="lastLogin">-</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">Total Resumes</div>
                            <div class="status-value" id="totalResumes">0</div>
                        </div>
                    </div>
                    
                    <div class="upgrade-section" id="upgradeSection" style="display: none;">
                        <h4>üåü Upgrade to Premium</h4>
                        <p>Get access to AI-powered suggestions and advanced features!</p>
                        <button class="btn-premium" onclick="upgradeToPremium()">‚≠ê Upgrade Now</button>
                    </div>
                </div>
            </div>
            
            <!-- Danger Zone -->
            <div class="settings-section danger-zone">
                <h3 class="section-title">‚ö†Ô∏è Danger Zone</h3>
                <div class="settings-card">
                    <div class="danger-content">
                        <h4>Delete Account</h4>
                        <p>Once you delete your account, there is no going back. Please be certain.</p>
                        <button class="btn-danger" onclick="showDeleteConfirmation()">üóëÔ∏è Delete Account</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ö†Ô∏è Confirm Account Deletion</h3>
                <button class="modal-close" onclick="hideDeleteConfirmation()">&times;</button>
            </div>
            <div class="modal-body">
                <p><strong>This action cannot be undone.</strong></p>
                <p>Your account and all associated data will be permanently deleted.</p>
                
                <form id="deleteForm">
                    <div class="form-group">
                        <label for="deletePassword">Enter your password to confirm:</label>
                        <input type="password" id="deletePassword" name="password" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="confirmDeletion" name="confirm_deletion" required>
                            I understand that this action cannot be undone
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="hideDeleteConfirmation()">Cancel</button>
                <button class="btn-danger" onclick="deleteAccount()">üóëÔ∏è Delete Account</button>
            </div>
        </div>
    </div>

    <script src="./static/js/config.js"></script>
    <script src="./static/js/us10_account.js"></script>
    <script>
        function handleBrandClick(event) {
            // For logged-in users, show a confirmation before leaving dashboard
            const confirmed = confirm('Are you sure you want to go to the landing page? You will need to log in again to access your dashboard.');
            if (!confirmed) {
                event.preventDefault();
            }
        }
    </script>
</body>
</html>
